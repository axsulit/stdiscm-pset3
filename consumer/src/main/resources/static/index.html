<!DOCTYPE html>
<html>
<head>
  <title>Uploaded Videos</title>
  <style>
    body {
      font-family: sans-serif;
    }
    .video-container {
      margin-bottom: 20px;
    }
    video {
      width: 300px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Uploaded Videos</h1>
  <div id="videos"></div>

  <script>
    async function fetchVideos() {
      const response = await fetch('/list');
      const files = await response.json();

      const container = document.getElementById('videos');
      container.innerHTML = '';

      files.forEach(file => {
        const div = document.createElement('div');
        div.className = 'video-container';

        const video = document.createElement('video');
        video.src = '/' + file;
        video.controls = false;
        video.muted = true;
        video.preload = 'metadata';

        video.addEventListener('mouseenter', () => {
          video.currentTime = 0;
          video.play();
          setTimeout(() => video.pause(), 10000);
        });

        video.addEventListener('click', () => {
          video.controls = true;
          video.play();
        });

        div.appendChild(video);
        container.appendChild(div);
      });
    }

    fetchVideos();
  </script>
</body>
</html>
